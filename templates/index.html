{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="col-lg-8">
            <h1 class="mb-4">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ShuBlog! üìù</h1>
            <p class="lead">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</p>

            {% if posts %}
            <div class="row">
                {% for post in posts %}
                <div class="col-md-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
                        {% if post.image %}
                        <img src="{{ post.image.url }}" class="card-img-top" alt="{{ post.title }}" 
                             style="height: 180px; object-fit: cover;">
                        {% endif %}
                        
                        <div class="card-body">
                            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
                            {% if post.category %}
                            <span class="badge bg-primary mb-2">{{ post.category.name }}</span>
                            {% endif %}
                            
                            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                            <h5 class="card-title">{{ post.title }}</h5>
                            
                            <!-- –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (–¢–û–õ–¨–ö–û 2-3 —Å—Ç—Ä–æ–∫–∏) -->
                            <div class="card-text line-clamp-3">
                                {{ post.content|striptags|truncatewords:30 }}...
                            </div>
                        </div>
                        
                        <div class="card-footer bg-transparent">
                            <!-- –ê–≤—Ç–æ—Ä –∏ –¥–∞—Ç–∞ -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <small class="text-muted">
                                    <i class="fas fa-user"></i> {{ post.author.username }}
                                </small>
                                <small class="text-muted">
                                    <i class="fas fa-calendar"></i> {{ post.created_at|date:"d.m.Y" }}
                                </small>
                            </div>
                            
                            <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã -->
                            <small class="text-muted d-block mb-2">
                                <i class="fas fa-eye"></i> {{ post.views }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
                            </small>
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ" -->
                            <div class="text-center">
                                <a href="/blog/post/{{ post.id }}/" class="btn btn-outline-primary btn-sm w-100">
                                    <i class="fas fa-book-open me-1"></i> –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <!-- –ï—Å–ª–∏ –ø–æ—Å—Ç–æ–≤ –Ω–µ—Ç -->
            <div class="text-center py-5">
                <i class="fas fa-feather-alt fa-3x text-muted mb-3"></i>
                <h3>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤</h3>
                <p class="text-muted">–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º –∞–≤—Ç–æ—Ä–æ–º!</p>
                {% if user.is_authenticated %}
                    <a href="{% url 'blog:create_post' %}" class="btn btn-outline-primary">
                        <i class="fas fa-plus"></i> –ù–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç
                    </a>
                {% else %}
                    <a href="{% url 'users:register' %}" class="btn btn-outline-primary">
                        <i class="fas fa-user-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                    </a>
                {% endif %}
            </div>
            {% endif %}
        </div>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="col-lg-4">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0"><i class="fas fa-info-circle"></i> –û –±–ª–æ–≥–µ</h5>
                </div>
                <div class="card-body">
                    <p>–≠—Ç–æ—Ç –±–ª–æ–≥ —Å–æ–∑–¥–∞–Ω –Ω–∞ Django —Å –ª—é–±–æ–≤—å—é –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∑–Ω–∞–Ω–∏—è–º.</p>
                    <div class="d-grid gap-2">
                        {% if user.is_authenticated %}
                            <a href="{% url 'blog:create_post' %}" class="btn btn-outline-primary">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç
                            </a>
                        {% else %}
                            <a href="{% url 'users:register' %}" class="btn btn-outline-primary">
                                <i class="fas fa-user-plus"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}